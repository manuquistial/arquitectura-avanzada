# =============================================================================
# CARPETA CIUDADANA - TERRAFORM CONFIGURATION (GLOBAL EXAMPLE)
# =============================================================================
# Este archivo contiene TODAS las variables para TODAS las capas
# 
# INSTRUCCIONES:
# 1. Copia este archivo como terraform.tfvars en cada capa
# 2. Elimina las variables que no corresponden a cada capa
# 3. O usa este archivo como referencia para crear los espec√≠ficos
# =============================================================================

# =============================================================================
# VARIABLES COMPARTIDAS (para todas las capas)
# =============================================================================

# Azure Configuration
azure_region = "westus2"
azure_subscription_id = "your-subscription-id"
environment = "production"
project_name = "carpeta-ciudadana"

# Security Configuration
security_contact_email = "security@carpeta-ciudadana.com"
security_contact_phone = "+1-555-0123"

# Network Configuration
vnet_cidr = "10.0.0.0/16"
subnet_cidrs = {
  aks = "10.0.1.0/24"
  db  = "10.0.2.0/24"
}

# DNS Configuration
dns_zone_name = "carpeta-ciudadana.dev"
app_subdomain = "app"

# Domain Configuration
domain_name = "carpeta-ciudadana.dev"
enable_tls = false

# =============================================================================
# BASE LAYER VARIABLES
# =============================================================================
# (Solo las variables compartidas arriba)

# =============================================================================
# PLATFORM LAYER VARIABLES
# =============================================================================

# AKS Configuration
aks_kubernetes_version = "1.31.11"
aks_automatic_upgrade = "patch"
aks_private_cluster = false
aks_sku_tier = "Free"
aks_authorized_ip_ranges = []
aks_admin_groups = []
aks_availability_zones = ["1", "2", "3"]
aks_system_vm_size = "Standard_B2s"
aks_system_node_count = 1
aks_system_node_min = 1
aks_system_node_max = 5
aks_user_vm_size = "Standard_B2s"
aks_user_node_min = 3
aks_user_node_max = 20
aks_enable_spot = true
aks_spot_vm_size = "Standard_B2s"
aks_spot_node_min = 0
aks_spot_node_max = 25
aks_spot_max_price = -1
aks_enable_autoscaling = true
aks_service_cidr = "10.1.0.0/16"
aks_dns_service_ip = "10.1.0.10"
aks_outbound_type = "loadBalancer"
aks_maintenance_day = "Sunday"
aks_maintenance_hours = 2
aks_node_count = 3
aks_vm_size = "Standard_B2s"

# Database Configuration
db_admin_username = "psqladmin"
db_admin_password = "CHANGE_ME_STRONG_PASSWORD_2024!"
db_sku_name = "GP_Standard_D2s_v3"
db_storage_mb = 32768

# Redis Configuration
redis_enabled = true
redis_sku = "Basic"
redis_capacity = 0
redis_family = "C"
redis_enable_non_ssl_port = false
redis_minimum_tls_version = "1.2"
redis_enable_authentication = true
redis_maxmemory_policy = "allkeys-lru"
redis_enable_vnet_integration = false
redis_enable_firewall_rules = false
redis_allow_azure_services = false

# Key Vault Configuration
keyvault_enabled = true
keyvault_name = "carpeta-ciudadana-kv-v2"
keyvault_sku_name = "standard"
keyvault_purge_protection_enabled = true
keyvault_soft_delete_retention_days = 90
keyvault_network_acls_default_action = "Deny"
keyvault_network_acls_bypass = "AzureServices"
keyvault_allowed_ip_rules = []
keyvault_initial_secrets = {}

# Front Door Configuration
frontdoor_enabled = true
frontdoor_frontend_hostname = "your-frontend-ip-or-domain"
frontdoor_api_hostname = "your-api-ip-or-domain"
frontdoor_enable_waf = true

# =============================================================================
# APPLICATION LAYER VARIABLES
# =============================================================================

# KEDA Configuration
keda_version = "2.13.0"
keda_namespace = "keda-system"
keda_replica_count = 2

# cert-manager Configuration
cert_manager_namespace = "cert-manager"
cert_manager_chart_version = "v1.13.3"
letsencrypt_email = "your-email@domain.com"
cert_manager_ingress_class = "nginx"
cert_manager_cpu_request = "100m"
cert_manager_cpu_limit = "200m"
cert_manager_memory_request = "128Mi"
cert_manager_memory_limit = "256Mi"

# OpenSearch Configuration
opensearch_username = "admin"
opensearch_password = "CHANGE_ME_OPENSEARCH_PASSWORD_2024!"

# External Secrets Configuration
external_secrets_namespace = "external-secrets-system"
external_secrets_version = "0.9.11"

# OpenSearch Namespace
opensearch_namespace = "opensearch"

# M2M Authentication
m2m_secret_key = "CHANGE_ME_M2M_SECRET_KEY_32_CHARS_HEX"

